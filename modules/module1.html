<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Windows CPL + Control Commands | tl docs</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: "class"
    };
  </script>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans">

  <!-- NAVBAR (matches home) -->
  <nav class="flex justify-between items-center px-6 py-4 bg-white dark:bg-gray-800 shadow-md">
    <a href="../index.html" class="text-xl font-bold text-gray-800 dark:text-gray-100">
      tl docs
    </a>

    <!-- Sun/Moon Slider Toggle (same assets as home) -->
    <label for="theme-toggle" class="relative inline-block w-20 h-10 cursor-pointer select-none">
      <input type="checkbox" id="theme-toggle" class="sr-only peer" />

      <!-- Track -->
      <div class="absolute inset-0 rounded-full bg-sky-300 dark:bg-gray-700 
                  peer-checked:bg-gray-700"></div>

      <!-- Thumb + icon -->
      <div class="absolute top-0.5 left-0.5 w-9 h-9 rounded-full shadow-md overflow-hidden
                  peer-checked:translate-x-10">
        <!-- Sun (light) -->
        <img src="../assets/sun.png" class="block w-full h-full object-cover dark:hidden" alt="Sun" />
        <!-- Moon (dark) -->
        <img src="../assets/moon.png" class="hidden w-full h-full object-cover dark:block" alt="Moon" />
      </div>
    </label>
  </nav>

  <!-- HERO -->
  <section class="py-12 text-center border-b border-gray-200 dark:border-gray-700">
    <h1 class="text-3xl md:text-4xl font-bold mb-3">
      ğŸ–¥ï¸ Windows CPL + Control Commands
    </h1>
    <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
      Quick-launch Control Panel applets and tools using <code class="px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700">.cpl</code>
      and <code class="px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700">control</code> commands.
    </p>
  </section>

  <!-- MAIN LAYOUT -->
  <main class="max-w-6xl mx-auto px-4 py-10 md:grid md:grid-cols-4 gap-8">

    <!-- SIDEBAR NAV -->
    <aside class="mb-8 md:mb-0 md:col-span-1 md:sticky md:top-24 space-y-4">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
        <h2 class="font-semibold mb-2 flex items-center gap-2">
          ğŸ“š Navigation
        </h2>
        <nav class="space-y-1 text-sm">
          <a href="#overview" class="block text-blue-500 hover:underline">Overview</a>
          <a href="#filters" class="block text-blue-500 hover:underline">Search & Filters</a>
          <a href="#commands" class="block text-blue-500 hover:underline">All CPL Commands</a>
          <a href="#tips" class="block text-blue-500 hover:underline">Tips & Notes</a>
        </nav>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 text-sm">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          ğŸ’¡ Quick usage
        </h3>
        <p class="text-gray-700 dark:text-gray-300 mb-1">
          Press <span class="font-mono">âŠ Win + R</span>, type the command, then hit <span class="font-mono">Enter</span>.
        </p>
        <p class="text-gray-700 dark:text-gray-300">
          The copy buttons below put the <span class="font-mono">control &lt;file.cpl&gt;</span> command on your clipboard.
        </p>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <section class="md:col-span-3 space-y-10">

      <!-- OVERVIEW -->
      <section id="overview" class="space-y-3">
        <h2 class="text-2xl font-semibold flex items-center gap-2">
          ğŸ§­ Overview
        </h2>
        <p class="text-gray-700 dark:text-gray-300">
          This module lists common Windows <strong>.cpl</strong> applets and related Control Panel commands,
          grouped by category (Networking, Security, Hardware, System, User Accounts, MEMCM, and more).
        </p>
      </section>

      <!-- FILTERS -->
      <section id="filters" class="space-y-4">
        <h2 class="text-2xl font-semibold flex items-center gap-2">
          ğŸ” Search & Filter
        </h2>

        <div class="grid md:grid-cols-3 gap-4">
          <!-- Search box -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1" for="search-input">
              Search commands (name, file, description) ğŸ”
            </label>
            <input
              id="search-input"
              type="text"
              placeholder="e.g. network, firewall, sysdm.cpl"
              class="w-full rounded-md border border-gray-300 dark:border-gray-700
                     bg-white dark:bg-gray-800 px-3 py-2 text-sm
                     focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <!-- Category filter -->
          <div>
            <label class="block text-sm font-medium mb-1" for="category-filter">
              Category filter ğŸ·ï¸
            </label>
            <select
              id="category-filter"
              class="w-full rounded-md border border-gray-300 dark:border-gray-700
                     bg-white dark:bg-gray-800 px-3 py-2 text-sm
                     focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">All categories</option>
              <option value="Networking">ğŸŒ Networking</option>
              <option value="Security">ğŸ” Security</option>
              <option value="Hardware">ğŸ–±ï¸ Hardware</option>
              <option value="System">âš™ï¸ System</option>
              <option value="User Accounts">ğŸ‘¤ User Accounts</option>
              <option value="MEMCM">ğŸ“¦ MEMCM</option>
              <option value="Other">ğŸ§© Other / Misc</option>
            </select>
          </div>
        </div>
      </section>

      <!-- COMMANDS LIST -->
      <section id="commands" class="space-y-6">
        <h2 class="text-2xl font-semibold flex items-center gap-2">
          ğŸ“‹ All CPL Commands
        </h2>
        <p class="text-gray-700 dark:text-gray-300 text-sm mb-4">
          Click <span class="font-mono">Copy</span> to copy the full
          <span class="font-mono">control &lt;file.cpl&gt;</span> command.  
          Use the search box and category filter to narrow down the list.
        </p>

        <!-- Container where JS will render accordions / tables -->
        <div id="commands-container" class="space-y-4"></div>
      </section>

      <!-- TIPS & NOTES -->
      <section id="tips" class="space-y-3">
        <h2 class="text-2xl font-semibold flex items-center gap-2">
          ğŸ§  Tips & Notes
        </h2>
        <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 space-y-2 text-sm">
          <li>
            Some OEMs or 3rd-party tools may install additional <code>.cpl</code> files not listed here.
          </li>
          <li>
            You can also run many of these commands from an elevated Command Prompt or PowerShell.
          </li>
          <li>
            <span class="font-mono">control</span> without arguments opens the classic Control Panel home.
          </li>
        </ul>
      </section>
    </section>
  </main>

  <!-- THEME TOGGLE LOGIC -->
  <script>
    const toggleSwitch = document.getElementById("theme-toggle");
    const htmlEl = document.documentElement;
    toggleSwitch.checked = htmlEl.classList.contains("dark");
    toggleSwitch.addEventListener("change", () => {
      htmlEl.classList.toggle("dark");
    });
  </script>

  <!-- COMMAND DATA + RENDERING + FILTER/COPY LOGIC -->
  <script>
    // Core CPL command data
    const cplCommands = [
      // Networking
      {
        name: "Network Connections",
        file: "ncpa.cpl",
        description: "Manage network adapters and change adapter settings.",
        category: "Networking"
      },
      {
        name: "Internet Options",
        file: "inetcpl.cpl",
        description: "Browser, proxy, and security options for Internet Explorer / legacy stack.",
        category: "Networking"
      },

      // Security
      {
        name: "Windows Firewall",
        file: "firewall.cpl",
        description: "Configure Windows Defender Firewall settings and rules.",
        category: "Security"
      },
      {
        name: "Security & Maintenance",
        file: "wscui.cpl",
        description: "View security status, maintenance messages, and troubleshooting.",
        category: "Security"
      },

      // Hardware
      {
        name: "Mouse",
        file: "main.cpl",
        description: "Adjust mouse buttons, pointer speed, and wheel settings.",
        category: "Hardware"
      },
      {
        name: "Keyboard",
        file: "main.cpl @1",
        description: "Keyboard properties (repeat delay, rate, etc.).",
        category: "Hardware"
      },
      {
        name: "Sound",
        file: "mmsys.cpl",
        description: "Playback, recording, sounds, and communications audio devices.",
        category: "Hardware"
      },
      {
        name: "Game Controllers",
        file: "joy.cpl",
        description: "Configure game controllers and joystick devices.",
        category: "Hardware"
      },

      // System
      {
        name: "System Properties",
        file: "sysdm.cpl",
        description: "System info, performance, remote settings, and system protection.",
        category: "System"
      },
      {
        name: "Programs and Features",
        file: "appwiz.cpl",
        description: "Uninstall or change installed programs.",
        category: "System"
      },
      {
        name: "Power Options",
        file: "powercfg.cpl",
        description: "Manage power plans and sleep / display settings.",
        category: "System"
      },
      {
        name: "Regional and Language Options",
        file: "intl.cpl",
        description: "Change system locale, formats, and keyboard layouts.",
        category: "System"
      },
      {
        name: "Date and Time",
        file: "timedate.cpl",
        description: "Adjust system date, time, and time zone.",
        category: "System"
      },
      {
        name: "Display Settings (Classic)",
        file: "desk.cpl",
        description: "Screen resolution, display settings (legacy).",
        category: "System"
      },
      {
        name: "ODBC Data Sources",
        file: "odbccp32.cpl",
        description: "Manage ODBC data sources (32-bit).",
        category: "System"
      },

      // User Accounts
      {
        name: "User Accounts (Classic)",
        file: "nusrmgr.cpl",
        description: "Legacy user account management (older Windows versions).",
        category: "User Accounts"
      },

      // MEMCM
      {
        name: "MEMCM Configuration Manager",
        file: "smscfgrc.cpl",
        description: "Launch Microsoft Endpoint Configuration Manager (MEMCM) client control panel applet.",
        category: "MEMCM"
      },

      // Other / Misc
      {
        name: "Phone and Modem Options",
        file: "telephon.cpl",
        description: "Configure dialing rules, modems, and telephony settings.",
        category: "Other"
      },
      {
        name: "Tablet PC Settings",
        file: "tabletpc.cpl",
        description: "Pen and touch, tablet buttons, and tablet PC options (where available).",
        category: "Other"
      }
    ];

    const categoriesInOrder = [
      { key: "Networking", label: "ğŸŒ Networking" },
      { key: "Security",   label: "ğŸ” Security" },
      { key: "Hardware",   label: "ğŸ–±ï¸ Hardware" },
      { key: "System",     label: "âš™ï¸ System" },
      { key: "User Accounts", label: "ğŸ‘¤ User Accounts" },
      { key: "MEMCM",      label: "ğŸ“¦ MEMCM" },
      { key: "Other",      label: "ğŸ§© Other / Misc" }
    ];

    const commandsContainer = document.getElementById("commands-container");
    const searchInput = document.getElementById("search-input");
    const categoryFilter = document.getElementById("category-filter");

    // Create accordions (details) per category, expanded by default
    const categorySections = {};

    function createLayout() {
      categoriesInOrder.forEach(cat => {
        const details = document.createElement("details");
        details.open = true; // expand all accordions by default
        details.className = "bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden";

        const summary = document.createElement("summary");
        summary.className = "cursor-pointer select-none px-4 py-3 flex items-center justify-between text-sm font-semibold text-gray-800 dark:text-gray-100";
        summary.innerHTML = `<span>${cat.label}</span><span class="text-xs text-gray-500 dark:text-gray-400">Category</span>`;

        const tableWrapper = document.createElement("div");
        tableWrapper.className = "overflow-x-auto";

        const table = document.createElement("table");
        table.className = "min-w-full text-sm";

        const thead = document.createElement("thead");
        thead.innerHTML = `
          <tr class="bg-gray-100 dark:bg-gray-700 text-left text-xs uppercase tracking-wide text-gray-600 dark:text-gray-200">
            <th class="px-4 py-2">Command</th>
            <th class="px-4 py-2">CPL File</th>
            <th class="px-4 py-2">Description</th>
            <th class="px-4 py-2 w-24">Copy</th>
          </tr>
        `;

        const tbody = document.createElement("tbody");
        tbody.dataset.categoryKey = cat.key;

        table.appendChild(thead);
        table.appendChild(tbody);
        tableWrapper.appendChild(table);

        details.appendChild(summary);
        details.appendChild(tableWrapper);

        commandsContainer.appendChild(details);

        categorySections[cat.key] = { details, tbody };
      });

      // Add rows
      cplCommands.forEach(cmd => {
        const catSection = categorySections[cmd.category] || categorySections["Other"];
        const tr = document.createElement("tr");
        tr.className = "border-t border-gray-200 dark:border-gray-700";
        tr.dataset.category = cmd.category;

        const fullCommand = `control ${cmd.file}`;

        tr.innerHTML = `
          <td class="px-4 py-2 align-top font-medium">${cmd.name}</td>
          <td class="px-4 py-2 align-top font-mono text-xs">${cmd.file}</td>
          <td class="px-4 py-2 align-top text-gray-700 dark:text-gray-300">${cmd.description}</td>
          <td class="px-4 py-2 align-top">
            <button
              class="copy-btn inline-flex items-center gap-1 text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded relative"
              data-command="${fullCommand}"
            >
              ğŸ“‹ Copy
              <span class="copy-tooltip absolute -top-6 left-1/2 -translate-x-1/2 
                           bg-gray-900 text-white text-[10px] px-2 py-1 rounded opacity-0 pointer-events-none">
                Copied!
              </span>
            </button>
          </td>
        `;

        catSection.tbody.appendChild(tr);
      });
    }

    function applyFilters() {
      const searchValue = searchInput.value.trim().toLowerCase();
      const categoryValue = categoryFilter.value;

      // For each category, track if any row is visible, to hide empty sections
      Object.values(categorySections).forEach(sec => {
        let visibleCount = 0;
        const rows = sec.tbody.querySelectorAll("tr");
        rows.forEach(row => {
          const rowCategory = row.dataset.category;
          const textContent = row.innerText.toLowerCase();

          let matchesSearch = !searchValue || textContent.includes(searchValue);
          let matchesCategory = categoryValue === "all" || rowCategory === categoryValue;

          if (matchesSearch && matchesCategory) {
            row.classList.remove("hidden");
            visibleCount++;
          } else {
            row.classList.add("hidden");
          }
        });

        // Hide entire accordion if no visible rows
        if (visibleCount === 0) {
          sec.details.classList.add("hidden");
        } else {
          sec.details.classList.remove("hidden");
        }
      });
    }

    function initCopyButtons() {
      const buttons = document.querySelectorAll(".copy-btn");
      buttons.forEach(btn => {
        btn.addEventListener("click", async () => {
          const cmd = btn.dataset.command;
          const tooltip = btn.querySelector(".copy-tooltip");

          try {
            await navigator.clipboard.writeText(cmd);
            if (tooltip) {
              tooltip.style.opacity = "1";
              setTimeout(() => {
                tooltip.style.opacity = "0";
              }, 900);
            }
          } catch (err) {
            console.error("Clipboard copy failed", err);
          }
        });
      });
    }

    // Init on load
    createLayout();
    applyFilters();
    initCopyButtons();

    // Filter listeners
    searchInput.addEventListener("input", applyFilters);
    categoryFilter.addEventListener("change", applyFilters);
  </script>
</body>
</html>
